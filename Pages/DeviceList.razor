@page "/Device"
@using Microsoft.AspNetCore.SignalR.Client
@using Radzen.Blazor.Rendering
@using SmartSwitchWeb.Database
@using SmartSwitchWeb.Hubs
@using SmartSwitchWeb.Data
@inject DialogService DialogService
@inject NavigationManager navigationManager
<h3>DeviceList</h3>
@foreach (Device _device in _deviceList)
{
               <RadzenCard class="m-3" style="float:inline-start;width: fit-content;">
                <h3 class="h5">Contact</h3>
                <div class="d-flex flex-row">
                    <div>
                        <div>Name</div>
                        <b>@(_device.Name)</b>
                        <div class="mt-3">Beschreibung</div>
                        <b>@_device.Description</b>
                        <div class="mt-3">Status</div>
                        <b>@(_device.LastOnline + " "+ _device.Status)</b>
                    </div>
                     <RadzenButton Text=@($"Edit") ButtonStyle="ButtonStyle.Secondary" Click=@(args => EditItem(_device.Guid)) />
                </div>
            </RadzenCard>
}
@code {
    DeviceContext context = new DeviceContext();
    private List<Device> _deviceList;
    protected override void OnInitialized()
    {
        _deviceList = context.GetAll();
    }
    async Task EditItem(string guid)
    {
         await DialogService.OpenAsync<EditDevicePage>("Edit Device", new Dictionary<string, object> { { "Guid", guid } });
    }
}
